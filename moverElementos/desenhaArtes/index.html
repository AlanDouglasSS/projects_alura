<meta charset="UTF-8">

<canvas width="600" height="400"></canvas>

<script>

    function desenhaQuadrado(x, y, tamanho, cor) {

        pincel.fillStyle = cor;
        pincel.fillRect(x, y, tamanho, tamanho)
        pincel.fill();
    }

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * 3.14);
        pincel.fill();

    }

    function desenhaPaletaDeCores() {

        desenhaQuadrado(xVermelho, yQuadrados, tamanhoQuadrados, 'red');
        desenhaQuadrado(xVerde, yQuadrados, tamanhoQuadrados, 'green');
        desenhaQuadrado(xAzul, yQuadrados, tamanhoQuadrados, 'blue');

    }

    function lidaComMovimentoDoMouse(evento) {

        var x = evento.pageX - tela.offsetLeft;
        var y = evento.pageY - tela.offsetTop;

        // usando a nova função 
        if(desenha && podeDesenharNaArea(x,y)) {

            desenhaCirculo(x, y, 5, corAtual);
        }
    }

    function habilitaDesenhar() {

        desenha = true;
    }

    function desabilitaDesenhar() {

        desenha = false;
    }

   // nova função
    function podeDesenharNaArea(x, y) {

        if(x >= 0 && x < 3*tamanhoQuadrados && y >= 0 && y < tamanhoQuadrados) {
            return false;
        } else {
            return true;
        }

    }

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');
    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var desenha = false;
    var corAtual = 'blue';
    var xVermelho = 0;
    var xVerde  = 50;
    var xAzul = 100;
    var yQuadrados = 0;
    var tamanhoQuadrados = 50;

    desenhaPaletaDeCores(); // desenha a paletaDeCores

    tela.onmousemove = lidaComMovimentoDoMouse;

    tela.onmousedown = habilitaDesenhar;

    tela.onmouseup = desabilitaDesenhar;




    /*
        PREVIA

        Este script é responsável por criar um canvas de dimensões 
        600x400 e permitir ao usuário desenhar na área. A paleta de 
        cores é criada por três quadrados de 50x50 pixels nas cores 
        vermelho, verde e azul. Quando o usuário passa o mouse sobre 
        a área de desenho e clica, um círculo é desenhado na cor atual 
        na posição em que o mouse está.

        Algumas funções importantes são definidas para implementar a 
        lógica de desenho, incluindo desenhaQuadrado(), desenhaCirculo(), 
        desenhaPaletaDeCores(), lidaComMovimentoDoMouse(), habilitaDesenhar(), 
        desabilitaDesenhar() e podeDesenharNaArea().

        A função lidaComMovimentoDoMouse() é chamada sempre que o mouse se 
        move sobre o canvas, atualizando a posição do mouse. A função 
        habilitaDesenhar() é chamada quando o mouse é pressionado e a 
        variável desenha é definida como true. A função desabilitaDesenhar() 
        é chamada quando o mouse é solto e a variável desenha é definida 
        como false.

        Por fim, o código define que o evento de movimento do mouse é 
        manipulado pela função lidaComMovimentoDoMouse(), o evento de 
        pressionar o mouse é manipulado pela função habilitaDesenhar(), 
        e o evento de soltar o mouse é manipulado pela função 
        desabilitaDesenhar().
    */

    /*
        FUNÇÕES

        A função desenhaQuadrado(x, y, tamanho, cor) recebe as coordenadas 
        x e y do canto superior esquerdo do quadrado, o tamanho do quadrado 
        e a cor a ser preenchida. Em seguida, preenche um quadrado com essa 
        cor nas coordenadas fornecidas.

        A função desenhaCirculo(x, y, raio, cor) recebe as coordenadas x e y do 
        centro do círculo, o raio e a cor a ser preenchida. Em seguida, desenha 
        um círculo com essa cor e raio nas coordenadas fornecidas.
    
        A função desenhaPaletaDeCores() desenha uma paleta de cores na tela, 
        composta por três quadrados nas cores vermelho, verde e azul, 
        respectivamente, usando a função desenhaQuadrado().
    
        A função lidaComMovimentoDoMouse(evento) é chamada toda vez que o 
        mouse se move sobre a tela e recebe um objeto evento como parâmetro. 
        Ela calcula a posição atual do mouse e verifica se a variável desenha 
        é verdadeira e se o mouse está dentro da área de desenho 
        (fora da paleta de cores). Se ambas as condições forem verdadeiras, 
        ela desenha um círculo na posição atual com a cor atual, usando a 
        função desenhaCirculo().
    
        A função habilitaDesenhar() é chamada quando o mouse é pressionado 
        na tela e simplesmente define a variável desenha como verdadeira.
    
        A função desabilitaDesenhar() é chamada quando o botão do mouse é 
        liberado e define a variável desenha como falsa.
    
        A função podeDesenharNaArea(x, y) é usada para verificar se o mouse 
        está dentro da área de desenho (fora da paleta de cores). 
        Ela recebe as coordenadas x e y do mouse e verifica se elas estão 
        dentro de um retângulo definido pelas coordenadas (0, 0) e 
        (3 * tamanhoQuadrados, tamanhoQuadrados), que é o tamanho da 
        paleta de cores. Se as coordenadas estiverem dentro desse retângulo, 
        a função retorna false, indicando que não é possível desenhar 
        naquela posição, caso contrário, retorna true, permitindo o 
        desenho naquela posição.
    */

</script>